{% extends 'base.html' %}

{% block title %}Campaign Details{% endblock %}

{% block 'Body' %}
<div class="container my-5">
    <div class="card">
        <div class="card-header">
            <h4>{{ campaign.title }}</h4>
        </div>
        <div class="card-body">
            <p><strong>Type:</strong> {{ campaign.get_campaign_type_display }}</p>
            <p><strong>Subject:</strong> {{ campaign.subject }}</p>
            <p><strong>Status:</strong> {{ campaign.get_status_display }}</p>
            <p><strong>Total Sent:</strong> {{ campaign.total_sent }}</p>
            <p><strong>Created:</strong> {{ campaign.created_at }}</p>
            
            <hr>
            
            <h5>Message Content:</h5>
            <div class="border p-3">
                {{ campaign.message|safe }}
            </div>
            <div class="mt-3 d-flex gap-2">
                {% if campaign.status == 'draft' %}
                <form method="post" action="{% url 'bulk_email_send_now' campaign.pk %}" 
                    onsubmit="return confirm('Send to {{ campaign.get_recipient_count }} users now?')">
                    {% csrf_token %}
                    <input type="hidden" name="confirmed" value="1">
                    <button type="submit" class="btn btn-warning btn-lg">
                        âš¡ Send Now (Bypass Queue)
                    </button>
                </form>
                {% endif %}
                <a href="{% url 'bulk_email_list' %}" class="btn btn-secondary mt-3">Back to List</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block 'Footer'%}
{% endblock%}