{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Basic Meta Tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="csrf-token" content="{{ csrf_token }}">
    
    <!-- SEO Title -->
    <title>{% block title %}OpenSell{% endblock %} | Buy and Sell Anything on Nigeria's Open Marketplace</title>
    <meta name="description" content="Buy and sell anything online in Nigeria on OpenSell – your trusted local marketplace for new and used items.">
    <meta name="keywords" content="OpenSell, Nigeria marketplace, buy, sell, used items, online marketplace, ecommerce">
    <meta name="author" content="OpenSell">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://opensell.online">
    
    <!-- Open Graph (Facebook, LinkedIn, etc.) -->
    <meta property="og:title" content="OpenSell - Nigeria's Premier Buy & Sell Marketplace">
    <meta property="og:description" content="Buy and sell anything online in Nigeria on OpenSell – your trusted local marketplace for new and used items.">
    <meta property="og:url" content="https://opensell.online">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="OpenSell">
    <meta property="og:image" content="https://opensell.online/static/images/logoicon.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="en_NG">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="OpenSell - Nigeria's Premier Buy & Sell Marketplace">
    <meta name="twitter:description" content="Buy and sell anything online in Nigeria on OpenSell – your trusted local marketplace for new and used items.">
    <meta name="twitter:image" content="https://opensell.online/static/images/logoicon.png">
    
    <!-- Mobile App / PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="OpenSell">
    <meta name="application-name" content="OpenSell">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#003366">
    <meta name="msapplication-TileColor" content="#003366">
    <meta name="msapplication-config" content="https://opensell.online/static/images/browserconfig.xml">
    
    <!-- Favicon and App Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://opensell.online/static/images/logoicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://opensell.online/static/images/logoicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://opensell.online/static/images/logoicon.png">
    <link rel="shortcut icon" href="https://opensell.online/static/images/logoicon.png">
    <link rel="mask-icon" href="https://opensell.online/static/images/logoicon.png" color="#003366">
    
    <!-- iOS -->
    <link rel="apple-touch-icon" href="https://opensell.online/static/images/logoshort.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://opensell.online/static/images/logoicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://opensell.online/static/images/logoicon.png">
    <link rel="apple-touch-icon" sizes="167x167" href="https://opensell.online/static/images/logoicon.png">
    
    <!-- Manifest (PWA) -->
    <link rel="manifest" href="https://opensell.online/static/images/manifest.json">
    
    <!-- Structured Data: WebSite -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "OpenSell",
        "alternateName": "OpenSell Online",
        "url": "https://opensell.online",
        "potentialAction": {
        "@type": "SearchAction",
        "target": "https://opensell.online/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <!-- Structured Data: Organization -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "OpenSell",
        "url": "https://opensell.online",
        "logo": "https://opensell.online/static/images/logoicon.png",
        "sameAs": [
        "https://www.facebook.com/opensell",
        "https://www.instagram.com/opensell"
        ],
        "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+234-800-000-0000",
        "contactType": "customer service",
        "availableLanguage": "English"
        }
    }
    </script>
    
    <!-- Preconnect & DNS Prefetch -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//unpkg.com">
    
    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/2.5.1/uicons-solid-rounded/css/uicons-solid-rounded.css">
    
    <!-- Your Main CSS -->
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

      

    <style>
        :root {
            /* Light Theme - Navy Primary with Charcoal Secondary */
            --light-primary-color: #003366;     /* Navy Blue - dominant */
            --light-secondary-color: #004d99;   /* Lighter Navy */
            --light-accent-color: #ff6600;      /* Vibrant Orange accent */
            --light-background: #f5f5f5;        /* Off-white */
            --light-card-background: #ffffff;    /* Pure white */
            --light-text-primary: #003366;      /* Navy text */
            --light-text-secondary: #666666;    /* Light Gray text */
            --light-border-color: #cccccc;      /* Light Gray border */
            --light-hover-bg: #e6e6e6;          /* Light Gray hover */
            --light-success: #28a745;           /* Keep standard success */
            --light-warning: #ff6600;           /* Orange warning */
            --light-error: #dc3545;             /* Keep standard error */
            --light-info: #004d99;              /* Lighter Navy info */
            --light-muted: #8c8c8c;             /* Muted Gray */
            --light-shadow: rgba(0, 51, 102, 0.15);
            
            /* Dark Theme - Charcoal Primary with Navy Accents */
            --dark-primary-color: #003366;      /* Lighter Navy Blue for better contrast */
            --dark-secondary-color: #1a2a3a;    /* Slightly darker Navy */
            --dark-accent-color: #ff6600;       /* Vibrant Orange (unchanged) */
            --dark-background: #121212;         /* Very dark background */
            --dark-card-background: #1e1e1e;    /* Dark surface for cards */
            --dark-text-primary: #ffffff;       /* White text */
            --dark-text-secondary: #d4d4d4;     /* Light Gray text */
            --dark-border-color: #3a3a3a;       /* Medium Gray border */
            --dark-hover-bg: #2a2a2a;           /* Dark hover background */
            --dark-success: #28a745;            /* Green success (unchanged) */
            --dark-warning: #ff6600;            /* Vibrant Orange warning (unchanged) */
            --dark-error: #dc3545;              /* Red error (unchanged) */
            --dark-info: #004d99;               /* Deep Navy info (unchanged) */
            --dark-muted: #6c757d;              /* Muted Gray */
            --dark-shadow: rgba(0, 0, 0, 0.5);  /* Dark shadow */
            
            /* Keep existing Typography variables */
            --font-primary: 'Poppins', sans-serif;
            --font-secondary: 'Newsreader', serif;
            --font-size-xs: 0.7rem;
            --font-size-sm: 0.8rem;
            --font-size-base: 0.95rem;
            --font-size-lg: 1.05rem;
            --font-size-xl: 1.15rem;
            --font-size-2xl: 1.35rem;
            --font-size-3xl: 1.65rem;
        
            /* Keep existing Spacing and Border Radius variables */
            --spacing-xs: 0.15rem;
            --spacing-sm: 0.35rem;
            --spacing-md: 0.75rem;
            --spacing-lg: 1.25rem;
            --spacing-xl: 1.75rem;
            --spacing-2xl: 2.5rem;
            
            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
            --radius-full: 9999px;
        }
        
        /* Theme Application */
        [data-bs-theme="light"] {
            --primary-color: var(--light-primary-color);
            --secondary-color: var(--light-secondary-color);
            --accent-color: var(--light-accent-color);
            --background-color: var(--light-background);
            --card-background: var(--light-card-background);
            --text-primary: var(--light-text-primary);
            --text-secondary: var(--light-text-secondary);
            --border-color: var(--light-border-color);
            --hover-bg: var(--light-hover-bg);
            --shadow-color: var(--light-shadow);
            --success: var(--light-success);
            --warning: var(--light-warning);
            --error: var(--light-error);
            --info: var(--light-info);
            --muted: var(--light-muted);
        }
        
        [data-bs-theme="dark"] {
            --primary-color: var(--dark-primary-color);
            --secondary-color: var(--dark-secondary-color);
            --accent-color: var(--dark-accent-color);
            --background-color: var(--dark-background);
            --card-background: var(--dark-card-background);
            --text-primary: var(--dark-text-primary);
            --text-secondary: var(--dark-text-secondary);
            --border-color: var(--dark-border-color);
            --hover-bg: var(--dark-hover-bg);
            --shadow-color: var(--dark-shadow);
            --success: var(--dark-success);
            --warning: var(--dark-warning);
            --error: var(--dark-error);
            --info: var(--dark-info);
            --muted: var(--dark-muted);
        }

        :root {
            --svg_pattern_color: 444444; /* For light mode */
        }
        
        [data-bs-theme="dark"] {
            --svg_pattern_color: aaaaaa; /* For dark mode */
        }

        [data-bs-theme="dark"] .btn-outline-primary {
            color: var(--dark-text-primary); 
            border-color: var(--dark-text-primary);
        }
        
        [data-bs-theme="dark"] .btn-outline-primary:hover {
            background-color: var(--dark-text-primary); 
            color: var(--dark-primary-color); 
            border-color: var(--dark-text-primary); 
        }
        
        /* Enhanced Base Styles */
        body {
            font-family: var(--font-primary);
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
            padding-top: max(var(--safe-area-inset-top), var(--navbar-height-mobile));
            --viewport-height: 100vh;
            --content-height: calc(var(--viewport-height) - var(--navbar-height-mobile) - var(--bottom-nav-height));
        }
        
        /* Content Wrapper with Advanced Layout */
        .content-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-lg);
            grid-template-columns: repeat(12, 1fr);
            gap: var(--spacing-md);
        }
        
        .container {
            padding-left: var(--spacing-sm);
            padding-right: var(--spacing-sm);
        }
        
        .row {
            margin-left: calc(-1 * var(--spacing-sm));
            margin-right: calc(-1 * var(--spacing-sm));
        }
        
        .col, [class*="col-"] {
            padding-left: var(--spacing-sm);
            padding-right: var(--spacing-sm);
        }
        
        .card {
            background-color: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            box-shadow: 0 4px 20px var(--shadow-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
            margin-bottom: var(--spacing-md);
        }
        
        .card-title {
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-sm);
            color: var(--dark-text-primary); /* White text */
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px var(--shadow-color);
        }
        
        /* Base Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            height: 40px; 
            padding: 0 16px;
            font-size: var(--font-size-base);
            font-weight: 500;
            border-radius: var(--radius-md); 
            border: 2px solid transparent; 
            transition: all 0.3s ease; 
            white-space: nowrap; 
            text-align: center;
            cursor: pointer;
        }
        
        /* Primary Button */
        .btn-primary {
            background-color: var(--primary-color);
            color: var(--card-background);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
            transform: translateY(-1px);
        }
        
        /* Secondary Button */
        .btn-secondary {
            background-color: var(--secondary-color);
            color: var(--card-background);
            border-color: var(--secondary-color);
        }
        
        .btn-secondary:hover {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }
        
        
        /* Outline Button */
        .btn-outline {
            background-color: transparent;
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-color);
            color: var(--dark-text-primary); /* White text on hover */
        }

        .btn-outline-primary {
            background-color: transparent;
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-color); 
            color: var(--card-background); /* Use card background color for text on hover */
            border-color: var(--primary-color); /* Keep border color consistent */
        }
        
        /* Danger Button */
        .btn-danger {
            background-color: var(--error);
            border-color: var(--error);
        }
        
        .btn-danger:hover {
            background-color: var(--dark-error);
            border-color: var(--dark-error);
        }
        
        /* Success Button */
        .btn-success {
            background-color: var(--success);
            border-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: var(--dark-success);
            border-color: var(--dark-success);
        }
        
        /* Warning Button */
        .btn-warning {
            background-color: var(--warning);
            border-color: var(--warning);
        }
        
        .btn-warning:hover {
            background-color: var(--dark-warning);
            border-color: var(--dark-warning);
        }
        
        /* Accent Button */
        .btn-accent {
            background-color: var(--accent-color);
            color: var(--dark-text-primary); /* White text */
            border: none;
        }
        
        .btn-accent:hover {
            background-color: #e65c00; /* Slightly darker orange */
            color: var(--dark-text-primary); /* White text */
        }
        
        /* Custom Card Styles */
        .card-highlight {
            border-left: 4px solid var(--accent-color);
        }

        /* Add these CSS rules to your style section */

        /* Improved dark mode button styling */
        [data-bs-theme="dark"] .btn-primary {
            background-color: var(--dark-primary-color);
            color: var(--dark-text-primary);
            border-color: var(--dark-primary-color);
        }

        [data-bs-theme="dark"] .btn-primary:hover {
            background-color: var(--dark-secondary-color);
            border-color: var(--dark-secondary-color);
        }

        [data-bs-theme="dark"] .btn-secondary {
            background-color: var(--dark-secondary-color);
            color: var(--dark-text-primary);
            border-color: var(--dark-secondary-color);
        }

        [data-bs-theme="dark"] .btn-secondary:hover {
            background-color: var(--dark-primary-color);
            border-color: var(--dark-primary-color);
        }

        /* Fix icons in dark mode */
        [data-bs-theme="dark"] .btn i,
        [data-bs-theme="dark"] .btn .bi,
        [data-bs-theme="dark"] .btn .bx,
        [data-bs-theme="dark"] .btn .material-symbols-outlined {
            color: var(--dark-text-primary);
        }

        /* Improved alert styling for dark mode */
        [data-bs-theme="dark"] .alert {
            background-color: var(--dark-card-background);
            color: var(--dark-text-primary);
        }

        [data-bs-theme="dark"] .alert-info {
            border-left: 4px solid var(--info, var(--dark-info));
        }

        [data-bs-theme="dark"] .alert-success {
            border-left: 4px solid var(--success, var(--dark-success));
        }

        [data-bs-theme="dark"] .alert-warning {
            border-left: 4px solid var(--warning, var(--dark-warning));
        }

        [data-bs-theme="dark"] .alert-danger {
            border-left: 4px solid var(--error, var(--dark-error));
        }

        [data-bs-theme="dark"] .btn-close {
            filter: invert(1); /* This helps the close button be visible in dark mode */
        }
            
    /* Custom Navigation Styles */
    .nav-link.active {
        color: var(--light-accent-color) !important;
        border-bottom: 2px solid var(--light-accent-color);
    }
      
      /* Advanced Form Controls */
      .form-control, .form-select {
          background-color: var(--card-background);
          border: 2px solid var(--border-color);
          color: var(--text-primary);
          border-radius: var(--radius-md);
          padding: var(--spacing-sm) var(--spacing-md);
          transition: all 0.3s ease;
      }
      
      .form-control:focus, .form-select:focus {
          border-color: var(--accent-color);
          box-shadow: 0 0 0 3px rgba(184, 115, 51, 0.2);
          outline: none;
      }
  
      /* Responsive Design */
      @media (max-width: 1200px) {
          .content-wrapper {
              padding: var(--spacing-md);
          }
      }
      
      @media (max-width: 992px) {
          .content-wrapper {
              padding: var(--spacing-sm);
          }
      }
      
      @media (max-width: 768px) {
          .content-wrapper {
              padding: var(--spacing-md);
              grid-template-columns: repeat(4, 1fr);
          }
      }
      
      @media (max-width: 576px) {
          .content-wrapper {
              padding: var(--spacing-sm);
              grid-template-columns: 1fr;
          }
          
          .btn-primary {
              width: 100%;
              margin-bottom: var(--spacing-sm);
          }
      }
  
      /* Simplified Alert Messages Styling */
    .message-container {
        position: relative;
        width: 100%;
        z-index: 1050;
        padding-top: 10px;
        padding-bottom: 5px;
    }
    
    .alert {
        margin: 0 auto 10px;
        max-width: 800px;
        border-radius: var(--radius-md);
        padding: 12px 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 5px var(--shadow-color);
        animation: alertFadeIn 0.3s ease forwards;
    }
    
    .alert-info {
        background-color: rgba(0, 77, 153, 0.1);
        border-left: 3px solid var(--info);
        color: var(--text-primary);
    }
    
    .alert-success {
        background-color: rgba(40, 167, 69, 0.1);
        border-left: 3px solid var(--success);
        color: var(--text-primary);
    }
    
    .alert-warning {
        background-color: rgba(255, 102, 0, 0.1);
        border-left: 3px solid var(--warning);
        color: var(--text-primary);
    }
    
    .alert-danger {
        background-color: rgba(220, 53, 69, 0.1);
        border-left: 3px solid var(--error);
        color: var(--text-primary);
    }
    
    .btn-close {
        background: transparent;
        border: none;
        opacity: 0.5;
        transition: opacity 0.2s ease;
        padding: 0;
        margin-left: 10px;
    }
    
    .btn-close:hover {
        opacity: 0.9;
    }
    
    /* Dark mode adjustments */
    [data-bs-theme="dark"] .alert {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
    }
    
    [data-bs-theme="dark"] .alert-info {
        background-color: rgba(0, 77, 153, 0.2);
    }
    
    [data-bs-theme="dark"] .alert-success {
        background-color: rgba(40, 167, 69, 0.2);
    }
    
    [data-bs-theme="dark"] .alert-warning {
        background-color: rgba(255, 102, 0, 0.2);
    }
    
    [data-bs-theme="dark"] .alert-danger {
        background-color: rgba(220, 53, 69, 0.2);
    }
    
    [data-bs-theme="dark"] .btn-close {
        filter: invert(1);
    }
    
    @keyframes alertFadeIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes alertFadeOut {
        from {
            opacity: 1;
            transform: translateY(0);
        }
        to {
            opacity: 0;
            transform: translateY(-10px);
        }
    }
    
    .alert.fade-out {
        animation: alertFadeOut 0.3s ease forwards;
    }
      
      .btn-close {
          opacity: 0.5;
          transition: opacity 0.3s ease;
      }
      
      .btn-close:hover {
          opacity: 1;
      }
  
      .notification-link-card {
          border-left: 4px solid var(--primary);
          transition: all 0.2s ease;
      }
      .notification-link-card:hover {
          transform: translateX(5px);
          box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15);
      }
  
      .row {
          margin-left: calc(-1 * var(--spacing-sm));
          margin-right: calc(-1 * var(--spacing-sm));
      }
      
      .col, [class*="col-"] {
          padding-left: var(--spacing-sm);
          padding-right: var(--spacing-sm);
      }
      
      /* Spacing Utilities Override */
      .p-1 { padding: var(--spacing-xs) !important; }
      .p-2 { padding: var(--spacing-sm) !important; }
      .p-3 { padding: var(--spacing-md) !important; }
      .p-4 { padding: var(--spacing-lg) !important; }
      .p-5 { padding: var(--spacing-xl) !important; }
      
      .m-1 { margin: var(--spacing-xs) !important; }
      .m-2 { margin: var(--spacing-sm) !important; }
      .m-3 { margin: var(--spacing-md) !important; }
      .m-4 { margin: var(--spacing-lg) !important; }
      .m-5 { margin: var(--spacing-xl) !important; }
      
      h1, .h1 { font-size: var(--font-size-3xl); }
      h2, .h2 { font-size: var(--font-size-2xl); }
      h3, .h3 { font-size: var(--font-size-xl); }
      h4, .h4 { font-size: var(--font-size-lg); }
      h5, .h5 { font-size: var(--font-size-base); }
      h6, .h6 { font-size: var(--font-size-sm); }
      
      /* Section Spacing */
      section {
          margin-bottom: var(--spacing-xl);
      }
      
      /* Alert Adjustments */
      .alert {
          padding: var(--spacing-sm) var(--spacing-md);
          margin-bottom: var(--spacing-md);
      }

        /* Add this to your keyframes section */
        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        .alert.fade-out {
            animation: fadeOut 0.5s ease-out forwards;
        }

        /* Fix for the close button in the sidebar */
        .btn-close-white {
        filter: invert(1) grayscale(100%) brightness(200%);
        }

        /* Ensure the close button is visible and properly positioned */
        .offcanvas-header .btn-close {
        color: white;
        opacity: 0.8;
        padding: 0.5rem;
        }

        .offcanvas-header .btn-close:hover {
        opacity: 1;
        }
  </style>
</head>
<body>
    {% block 'Navbar' %}
        {% include "navbar.html" %}
    {% endblock %}

    {% block 'messages' %}
    {% if messages %}
        <div class="message-container">
            {% for message in messages %}
                <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %}" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" aria-label="Close"></button>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    {% endblock %}

    <div class="content-wrapper">
        <div class="container-fluid py-2">
        {% block 'Body' %}{% endblock %}
        </div>
    </div>

    {% block 'Footer' %}
        {% include "footer.html" %}
        
        <div id="cookie-consent-banner" class="cookie-consent-banner">
            <div class="cookie-content">
                <div class="cookie-header">
                    <div class="cookie-icon">
                        <i class="bi bi-cookie"></i>
                    </div>
                    <h4 class="cookie-title">Cookie Notice</h4>
                    <div class="cookie-close-mobile">
                        <button type="button" class="cookie-close-btn" aria-label="Close">
                            <i class="bi bi-x"></i>
                        </button>
                    </div>
                </div>
                <div class="cookie-body">
                    <p>We use cookies to enhance your browsing experience on our website. By continuing to use our site, you agree to our use of cookies. Our cookies help us understand how visitors interact with our site, remember your preferences, and provide you with a more personalized experience.</p>
                </div>
                <div class="cookie-actions">
                    <button id="cookie-settings-banner"  class="btn btn-outline-secondary">Cookie Settings</button>
                    <button id="reject-cookies" class="btn btn-outline-primary">Reject All</button>
                    <button id="accept-cookies" class="btn btn-primary">Accept All</button>
                </div>
            </div>
        </div>


        <div id="cookie-settings-modal" class="cookie-settings-modal">
            <div class="cookie-settings-content">
                <div class="cookie-settings-header">
                    <h4 class="modal-title">Cookie Preferences</h4>
                    <button type="button" id="close-settings" class="cookie-close-btn" aria-label="Close">
                        <i class="bi bi-x"></i>
                    </button>
                </div>
                <div class="cookie-settings-body">
                    <p class="settings-intro">Customize your cookie preferences. You can enable or disable different types of cookies below. Essential cookies cannot be disabled as they are necessary for the website to function properly.</p>
                    
                    <div class="cookie-type">
                        <div class="cookie-type-header">
                            <div class="type-name">
                                <h5>Essential Cookies</h5>
                            </div>
                            <div class="type-toggle">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="essential-cookies" checked disabled>
                                </div>
                            </div>
                        </div>
                        <p class="cookie-type-description">These cookies are necessary for the website to function and cannot be switched off. They are usually only set in response to actions made by you which amount to a request for services.</p>
                    </div>
                    
                    <div class="cookie-type">
                        <div class="cookie-type-header">
                            <div class="type-name">
                                <h5>Functional Cookies</h5>
                            </div>
                            <div class="type-toggle">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="functional-cookies">
                                </div>
                            </div>
                        </div>
                        <p class="cookie-type-description">These cookies enable the website to provide enhanced functionality and personalization, such as remembering your preferences and settings.</p>
                    </div>
                    
                    <div class="cookie-type">
                        <div class="cookie-type-header">
                            <div class="type-name">
                                <h5>Analytics Cookies</h5>
                            </div>
                            <div class="type-toggle">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="analytics-cookies">
                                </div>
                            </div>
                        </div>
                        <p class="cookie-type-description">These cookies allow us to count visits and analyze traffic sources so we can measure and improve the performance of our site.</p>
                    </div>
                </div>
                <div class="cookie-settings-footer">
                    <div class="cookie-settings-actions">
                        <button id="save-preferences" class="btn btn-primary">Save Preferences</button>
                    </div>
                    <div class="cookie-settings-links">
                        <a href="{% url 'cookie_policy' %}" class="cookie-policy-link">View our Cookie Policy</a>
                    </div>
                </div>
            </div>
        </div>

        <style>
            /* Cookie Consent Banner */
            .cookie-consent-banner {
                position: fixed;
                bottom: -100%;
                left: 0;
                right: 0;
                background-color: var(--card-background);
                box-shadow: 0 -4px 12px var(--shadow-color);
                z-index: 9999;
                padding: 1rem;
                transition: bottom 0.5s ease-in-out;
                border-top: 3px solid var(--primary-color);
            }
            
            .cookie-consent-banner.show {
                bottom: 0;
            }
            
            .cookie-content {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0.5rem;
            }
            
            .cookie-header {
                display: flex;
                align-items: center;
                margin-bottom: 1rem;
            }
            
            .cookie-icon {
                background-color: var(--primary-color);
                color: #ffffff;
                width: 36px;
                height: 36px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 1rem;
                font-size: 1.2rem;
            }
            
            .cookie-title {
                margin: 0;
                font-weight: 600;
                color: var(--text-primary);
            }
            
            .cookie-close-mobile {
                margin-left: auto;
                display: none;
            }
            
            .cookie-body {
                margin-bottom: 1.5rem;
                color: var(--text-primary);
            }
            
            .cookie-actions {
                display: flex;
                justify-content: flex-end;
                gap: 1rem;
            }
            
            /* Cookie Settings Modal */
            .cookie-settings-modal {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0;
                visibility: hidden;
                transition: opacity 0.3s ease, visibility 0.3s ease;
            }
            
            .cookie-settings-modal.show {
                opacity: 1;
                visibility: visible;
            }
            
            .cookie-settings-content {
                background-color: var(--card-background);
                border-radius: var(--radius-md);
                width: 90%;
                max-width: 600px;
                max-height: 90vh;
                overflow-y: auto;
                box-shadow: 0 4px 20px var(--shadow-color);
            }
            
            .cookie-settings-header {
                padding: 1.25rem;
                border-bottom: 1px solid var(--border-color);
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            
            .cookie-settings-body {
                padding: 1.25rem;
            }
            
            .cookie-settings-footer {
                padding: 1.25rem;
                border-top: 1px solid var(--border-color);
            }
            
            .cookie-close-btn {
                background: transparent;
                border: none;
                font-size: 1.5rem;
                color: var(--text-secondary);
                cursor: pointer;
                padding: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: color 0.2s ease;
            }
            
            .cookie-close-btn:hover {
                color: var(--text-primary);
            }
            
            .settings-intro {
                margin-bottom: 1.5rem;
                color: var(--text-primary);
            }
            
            .cookie-type {
                border: 1px solid var(--border-color);
                border-radius: var(--radius-sm);
                padding: 1rem;
                margin-bottom: 1rem;
            }
            
            .cookie-type-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0.5rem;
            }
            
            .type-name h5 {
                margin: 0;
                font-weight: 600;
                font-size: 1rem;
                color: var(--text-primary);
            }
            
            .cookie-type-description {
                font-size: 0.9rem;
                color: var(--text-secondary);
                margin-bottom: 0;
            }
            
            .cookie-settings-actions {
                margin-bottom: 1rem;
            }
            
            .cookie-settings-links {
                text-align: center;
            }
            
            .cookie-policy-link {
                color: var(--primary-color);
                text-decoration: none;
                font-size: 0.9rem;
            }
            
            .cookie-policy-link:hover {
                text-decoration: underline;
            }
            
            /* Responsive */
            @media (max-width: 768px) {
                .cookie-actions {
                    flex-direction: column;
                }
                
                .cookie-actions button {
                    width: 100%;
                }
                
                .cookie-close-mobile {
                    display: block;
                }
            }
        </style>
        <script>
            // Save this as cookie_consent.js in your static/js directory

            // Cookie Consent JavaScript// Cookie Consent JavaScript
            document.addEventListener('DOMContentLoaded', function() {
                // Check if user has already made a choice
                const cookieConsent = localStorage.getItem('cookieConsent');
                
                if (cookieConsent === null) {
                    // If no choice has been made, show the banner
                    setTimeout(function() {
                        document.getElementById('cookie-consent-banner').classList.add('show');
                    }, 1000);
                } else {
                    // Apply saved preferences
                    applyStoredPreferences();
                }
                
                // Accept cookies
                document.getElementById('accept-cookies').addEventListener('click', function() {
                    acceptCookies();
                });
                
                // Reject non-essential cookies
                document.getElementById('reject-cookies').addEventListener('click', function() {
                    rejectCookies();
                });
                
                // Cookie settings button in the banner
                document.getElementById('cookie-settings-banner').addEventListener('click', function() {
                    document.getElementById('cookie-consent-banner').classList.remove('show');
                    showSettingsModal();
                });
                
                // Cookie settings button (standalone)
                if (document.getElementById('cookie-settings-btn')) {
                    document.getElementById('cookie-settings-btn').addEventListener('click', function() {
                        showSettingsModal();
                    });
                }
                
                // Cookie settings footer link
                if (document.getElementById('cookie-settings-footer')) {
                    document.getElementById('cookie-settings-footer').addEventListener('click', function(e) {
                        e.preventDefault();
                        showSettingsModal();
                    });
                }
                
                // Close cookie settings modal
                document.getElementById('close-settings').addEventListener('click', function() {
                    document.getElementById('cookie-settings-modal').classList.remove('show');
                    
                    // If user hasn't made a choice yet, show banner again
                    if (localStorage.getItem('cookieConsent') === null) {
                        document.getElementById('cookie-consent-banner').classList.add('show');
                    }
                });
                
                // Save preferences from modal
                document.getElementById('save-preferences').addEventListener('click', function() {
                    const functional = document.getElementById('functional-cookies').checked;
                    const analytics = document.getElementById('analytics-cookies').checked;
                    
                    savePreferences(functional, analytics);
                });
            });

            function showSettingsModal() {
                // Load current preferences into checkboxes
                const functional = localStorage.getItem('functionalCookies') === 'true';
                const analytics = localStorage.getItem('analyticsCookies') === 'true';
                
                if (document.getElementById('functional-cookies')) {
                    document.getElementById('functional-cookies').checked = functional;
                }
                
                if (document.getElementById('analytics-cookies')) {
                    document.getElementById('analytics-cookies').checked = analytics;
                }
                
                // Show the modal
                document.getElementById('cookie-settings-modal').classList.add('show');
            }

            function acceptCookies() {
                // Set cookies and save preference
                localStorage.setItem('cookieConsent', 'accepted');
                localStorage.setItem('functionalCookies', 'true');
                localStorage.setItem('analyticsCookies', 'true');
                
                // Hide the banner with animation
                document.getElementById('cookie-consent-banner').classList.remove('show');
                
                // Enable all cookie types
                enableCookies('all');
                
                // Send to server if needed
                sendConsentToServer('accept');
            }

            function rejectCookies() {
                // Save preference but only allow essential cookies
                localStorage.setItem('cookieConsent', 'rejected');
                localStorage.setItem('functionalCookies', 'false');
                localStorage.setItem('analyticsCookies', 'false');
                
                // Hide the banner with animation
                document.getElementById('cookie-consent-banner').classList.remove('show');
                
                // Only enable essential cookies
                enableCookies('essential');
                
                // Send to server if needed
                sendConsentToServer('reject');
            }

            function savePreferences(functional, analytics) {
                // Save detailed preferences
                localStorage.setItem('cookieConsent', 'custom');
                localStorage.setItem('functionalCookies', functional ? 'true' : 'false');
                localStorage.setItem('analyticsCookies', analytics ? 'true' : 'false');
                
                // Hide the modal
                document.getElementById('cookie-settings-modal').classList.remove('show');
                
                // Enable appropriate cookies
                const cookieTypes = ['essential'];
                if (functional) cookieTypes.push('functional');
                if (analytics) cookieTypes.push('analytics');
                
                enableCookies(cookieTypes);
                
                // Send to server if needed
                sendConsentToServer('custom', {
                    functional: functional,
                    analytics: analytics
                });
            }

            function applyStoredPreferences() {
                // Apply the stored cookie preferences when page loads
                const consent = localStorage.getItem('cookieConsent');
                const functional = localStorage.getItem('functionalCookies') === 'true';
                const analytics = localStorage.getItem('analyticsCookies') === 'true';
                
                if (consent === 'accepted') {
                    enableCookies('all');
                } else if (consent === 'rejected') {
                    enableCookies('essential');
                } else if (consent === 'custom') {
                    const cookieTypes = ['essential'];
                    if (functional) cookieTypes.push('functional');
                    if (analytics) cookieTypes.push('analytics');
                    enableCookies(cookieTypes);
                }
            }

            function enableCookies(types) {
                // This function handles the actual enabling/disabling of different cookie types
                console.log('Enabling cookie types:', types);
                
                // Example: If you're using Google Analytics
                if (types === 'all' || (Array.isArray(types) && types.includes('analytics'))) {
                    // Enable analytics
                    initializeAnalytics();
                }
                
                // Enable functional cookies if needed
                if (types === 'all' || (Array.isArray(types) && types.includes('functional'))) {
                    // Enable functional cookies
                    initializeFunctionalCookies();
                }
            }

            function initializeAnalytics() {
                // Placeholder function to initialize analytics tools like Google Analytics
                // This is where you would add your analytics initialization code
                console.log('Analytics initialized');
                
                // Example Google Analytics initialization (commented out)
                /*
                if (typeof ga === 'undefined') {
                    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
                    
                    ga('create', 'UA-XXXXX-Y', 'auto');
                    ga('send', 'pageview');
                }
                */
            }

            function initializeFunctionalCookies() {
                // Placeholder function to initialize functional cookies
                // This is where you would add code to enable functionality that uses cookies
                console.log('Functional cookies initialized');
            }

            function sendConsentToServer(consentType, details = {}) {
                // This function sends the user's consent to your server if needed
                // Get the CSRF token
                const csrfToken = getCsrfToken();
                
                // Prepare the data to send
                const data = {
                    consent_type: consentType,
                    details: details
                };
                
                // Send the POST request to your Django backend
                fetch('/api/cookie-consent/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrfToken
                    },
                    body: JSON.stringify(data)
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Consent saved:', data);
                })
                .catch(error => {
                    console.error('Error saving consent:', error);
                });
            }

            function getCsrfToken() {
                // Get CSRF token from cookies
                let cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    const cookies = document.cookie.split(';');
                    for (let i = 0; i < cookies.length; i++) {
                        const cookie = cookies[i].trim();
                        if (cookie.substring(0, 'csrftoken='.length) === 'csrftoken=') {
                            cookieValue = decodeURIComponent(cookie.substring('csrftoken='.length));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
        </script>
    {% endblock %}

    <!-- Essential Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://accounts.google.com/gsi/client" async></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add scroll handling JavaScript here
            if (window.innerWidth < 992) {
                let lastScroll = 0;
                
                window.addEventListener('scroll', () => {
                    const currentScroll = window.scrollY;
                    
                    if (currentScroll > lastScroll && currentScroll > 100) {
                        document.getElementById('mainNavbar').style.transform = 'translateY(-100%)';
                        document.getElementById('bottomNav').style.transform = 'translateY(100%)';
                    } else {
                        document.getElementById('mainNavbar').style.transform = 'translateY(0)';
                        document.getElementById('bottomNav').style.transform = 'translateY(0)';
                    }
                    
                    lastScroll = currentScroll;
                });
            }
        });
    </script>
    <!-- Theme Management Script -->
    <script>
   
        // Theme management class
        class ThemeManager {
            constructor() {
                this.html = document.documentElement;
                this.initialize();
            }

            initialize() {
                // Check for saved theme first
                const savedTheme = localStorage.getItem('theme');
                
                if (savedTheme) {
                    // Use saved theme if it exists
                    this.setTheme(savedTheme);
                } else {
                    // Otherwise use system preference
                    this.setThemeBasedOnSystem();
                }

                // Listen for system theme changes
                this.setupSystemThemeListener();
            }

            setThemeBasedOnSystem() {
                if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    this.setTheme('dark');
                } else {
                    this.setTheme('light');
                }
            }

            setupSystemThemeListener() {
                window.matchMedia('(prefers-color-scheme: dark)')
                    .addEventListener('change', e => {
                        // Only change theme if user hasn't set a preference
                        if (!localStorage.getItem('theme')) {
                            this.setTheme(e.matches ? 'dark' : 'light');
                        }
                    });
            }

            setTheme(theme) {
                this.html.setAttribute('data-bs-theme', theme);
                this.updateAllThemeToggles(theme);
            }

            toggleTheme() {
                const currentTheme = this.html.getAttribute('data-bs-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                this.setTheme(newTheme);
                localStorage.setItem('theme', newTheme);
            }

            updateAllThemeToggles(theme) {
                // Update all theme toggle icons on the page
                document.querySelectorAll('.theme-toggle-icon').forEach(icon => {
                    icon.className = `theme-toggle-icon bi ${theme === 'light' ? 'bi-moon-fill' : 'bi-sun-fill'}`;
                });
            }
        }

        // Initialize theme manager
        const themeManager = new ThemeManager();
        // Make themeManager available globally for other templates
        window.themeManager = themeManager;

        // Set up simple alert handling
        const alerts = document.querySelectorAll('.alert');
        
        alerts.forEach(alert => {
            // Set up close button event
            const closeBtn = alert.querySelector('.btn-close');
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    dismissAlert(alert);
                });
            }
            
            // Auto dismiss after 2 seconds
            setTimeout(() => {
                dismissAlert(alert);
            }, 2000);
        });
        
        function dismissAlert(alert) {
            if (!alert.classList.contains('fade-out')) {
                alert.classList.add('fade-out');
                setTimeout(() => {
                    alert.remove();
                }, 300);
            }
        }

        // Add to the DOMContentLoaded event listener
        document.addEventListener('DOMContentLoaded', function() {
            setupModernAlerts();
        });
    </script>
</body>
</html>