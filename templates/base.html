{% load static %}
{% load compress %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <script>
            (function() {
                function setThemeImmediately() {
                    const html = document.documentElement;
                    
                    let savedTheme = null;
                    try {
                        savedTheme = localStorage.getItem('theme');
                    } catch (e) {}
                    
                    if (savedTheme && (savedTheme === 'light' || savedTheme === 'dark')) {
                        html.setAttribute('data-bs-theme', savedTheme);
                    } else {
                        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                            html.setAttribute('data-bs-theme', 'dark');
                        } else {
                            html.setAttribute('data-bs-theme', 'light');
                        }
                    }
                }
                setThemeImmediately();
            })();
        </script>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
        <meta name="csrf-token" content="{{ csrf_token }}">

        <title>{% block title %}OpenSell{% endblock %} | Buy and Sell Anything in Nigeria</title>
        <meta name="description" content="{% block meta_description %}Buy and sell anything on OpenSell, Nigeria's trusted online marketplace for new and used items. Join the local trade revolution.{% endblock %}">
        <meta name="keywords" content="OpenSell, buy and sell Nigeria, online marketplace Nigeria, classifieds, used goods Nigeria">
        <meta name="author" content="OpenSell">

        <link rel="canonical" href="{% block canonical_url %}https://opensell.online{% endblock %}">

        <meta property="og:type" content="website">
        <meta property="og:title" content="{% block og_title %}OpenSell - Buy and Sell Online Marketplace{% endblock %}">
        <meta property="og:description" content="{% block og_description %}Discover amazing products and sell your items on OpenSell marketplace. Safe, secure, and easy to use.{% endblock %}">
        <meta property="og:image" content="{% static 'images/logoicon.png' %}">
        <meta property="og:url" content="{% block og_url %}https://opensell.online{% endblock %}">
        <meta property="og:site_name" content="OpenSell">

        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="{% block twitter_title %}OpenSell - Buy and Sell Online Marketplace{% endblock %}">
        <meta name="twitter:description" content="{% block twitter_description %}Discover amazing products and sell your items on OpenSell marketplace. Safe, secure, and easy to use.{% endblock %}">
        <meta name="twitter:image" content="{% static 'images/logoicon.png' %}">

        <link rel="icon" href="{% static 'images/logoicon.png' %}" type="image/png">
        <meta name="theme-color" content="#003366">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
        <meta name="apple-mobile-web-app-title" content="OpenSell">

        <link rel="apple-touch-icon" href="{% static 'images/logoicon.png' %}">
        <link rel="apple-touch-icon" sizes="57x57" href="{% static 'images/logoicon.png' %}">
        <link rel="apple-touch-icon" sizes="60x60" href="{% static 'images/logoicon.png' %}">
        <link rel="apple-touch-icon" sizes="72x72" href="{% static 'images/logoicon.png' %}">
        <link rel="apple-touch-icon" sizes="76x76" href="{% static 'images/logoicon.png' %}">
        <link rel="apple-touch-icon" sizes="114x114" href="{% static 'images/logoicon.png' %}">
        <link rel="apple-touch-icon" sizes="120x120" href="{% static 'images/logoicon.png' %}">
        <link rel="apple-touch-icon" sizes="144x144" href="{% static 'images/logoicon.png' %}">
        <link rel="apple-touch-icon" sizes="152x152" href="{% static 'images/logoicon.png' %}">
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/logoicon.png' %}">
        <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/logoicon.png' %}">
        <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/logoicon.png' %}">
        <link rel="icon" type="image/png" sizes="48x48" href="{% static 'images/logoicon.png' %}">

        <meta name="msapplication-TileImage" content="{% static 'images/logoicon.png' %}">
        <meta name="msapplication-TileColor" content="#003366">

        <link rel="manifest" href="{% url 'manifest' %}">

        <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">

        <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" crossorigin>
        <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" as="style" onload="this.onload=null;this.rel='stylesheet'" crossorigin>
        <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" crossorigin>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

        {% compress css %}
            <link rel="stylesheet" type="text/css" href="{% static 'css/base/variables.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/base/layout.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/base/components.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/base/theme.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/base/alert.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/base/responsive.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/pages/navbar.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/pages/footer.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/pwa.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/pages/product_card.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/pages/pwa-install-modal.css' %}">
            {% block page_css %}{% endblock %}
        {% endcompress %}

        <noscript>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
            <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
            <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
            <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        </noscript>

        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "Organization",
                "name": "OpenSell",
                "url": "https://opensell.online",
                "logo": "https://opensell.online/static/images/logoicon.png",
                "sameAs": [
                    "https://facebook.com/opensellng",
                    "https://twitter.com/opensellng",
                    "https://instagram.com/opensellng"
                ],
                "description": "OpenSell is Nigeria's local online marketplace to buy and sell anything â€” trusted by thousands.",
                "founder": "OpenSell",
                "foundingDate": "2025-05-02",
                "location": {
                    "@type": "Place",
                    "address": {
                    "@type": "PostalAddress",
                    "addressLocality": "Iwo",
                    "addressRegion": "Osun",
                    "addressCountry": "NG"
                    }
                }
            }
        </script>

        {% block additional_head %}{% endblock %}
    </head>
    <body>
        {% block 'Navbar' %}
            {% include "navbar.html" %}
        {% endblock %}

        {% block messages %}
        {% if messages %}
            <div class="alert-system-container" id="alertSystemContainer">
                {% for message in messages %}
                    <div class="system-alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %}" 
                        role="alert" 
                        data-auto-dismiss="3500">
                        <div class="alert-content">
                            <div class="alert-icon">
                                {% if message.tags == 'success' %}
                                    <i class="bi bi-check-circle-fill"></i>
                                {% elif message.tags == 'error' or message.tags == 'danger' %}
                                    <i class="bi bi-exclamation-circle-fill"></i>
                                {% elif message.tags == 'warning' %}
                                    <i class="bi bi-exclamation-triangle-fill"></i>
                                {% else %}
                                    <i class="bi bi-info-circle-fill"></i>
                                {% endif %}
                            </div>
                            <div class="alert-message">{{ message }}</div>
                        </div>
                        <button type="button" class="alert-close-btn" aria-label="Close">
                            <i class="bi bi-x"></i>
                        </button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        {% endblock %}

        <div class="content-wrapper">
            <div class="container-fluid py-2">
            {% block 'Body' %}{% endblock %}
            </div>
        </div>

        {% block 'Footer'%}
            {% include "footer.html" %}
            {% include "cookies_consent.html" %}
        {% endblock %}

        {% include "pwa_install_modal.html" %}

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://accounts.google.com/gsi/client" async></script>

        {% compress js %}
            <script type="text/javascript" src="{% static 'js/base/theme-manager.js' %}"></script>
            <script type="text/javascript" src="{% static 'js/base/alerts.js' %}"></script>
            <script type="text/javascript" src="{% static 'js/base/navigation.js' %}"></script>
            <script type="text/javascript" src="{% static 'js/pages/navbar.js' %}"></script>
            <script type="text/javascript" src="{% static 'js/pwa.js' %}"></script>
            <script type="text/javascript" src="{% static 'js/pages/product_card.js' %}"></script>
            <script type="text/javascript" src="{% static 'js/pages/pwa-install-instructions.js' %}"></script>
            {% block page_js %}{% endblock %}
        {% endcompress %}

        {% block additional_js %}{% endblock %}
    </body>
</html>